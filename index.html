<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js – The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<div class="slides">
				<section>
					<h1>JSPM</h1>
					<img src="jspm.svg" />
					<h2><a href="jspm.io">jspm.io</a></h2>
				</section>

				<section>
					<h2>Les balises script...</h2>


						<pre><code data-trim>
&lt;script src="jquery.js">&lt;/script>
&lt;script src="jquery-ui.js">&lt;/script>
&lt;script src="angular.js">&lt;/script>
						</code></pre>

					<h3  class="fragment">...c'est so 2010</h3>
				</section>

				<section>
					<h2>Les problèmes de l'approche traditionnelle</h2>
					<ul>
						<li>Les variables globales (<code>_</code>, <code>$</code>, <code>moment</code>, etc.)</li>
						<li>Les conflits de versions</li>
						<li>L'ordre d'exécution</li>
						<li>Les dépendances transitives</li>
					</ul>
				</section>
				<section>
					<h2>Exemple : </h2>
					<img src="dependenciesHell.jpeg"/>
				</section>

				<section>
					<h2>Les modules en JS</h2>
					<h4>AMD</h4>
					<pre><code data-trim class="javascript">
define(function (require, exports) {
    var $ = require('jquery');
    exports.version = $.jquery;
});
					</code></pre>
					<h4>Common JS</h4>
<pre><code data-trim class="javascript">
var $ = require('jquery');

export $.jquery;
					</code></pre>
				</section>

				<section>
					<h2>Les modules ES6</h2>
<pre><code data-trim class="javascript">
import $ from 'jquery';

const version = $.jquery;
export default version;
</code></pre>
				</section>

				<section>
					<h2>Les modules ES6</h2>
<pre><code data-trim class="javascript">
import {find, filter as myFilter} from 'lodash';

const result = myFilter([1,2,3], n => n % 2 == 0);

export const result;
</code></pre>
				</section>

				<section>
					<h2>JSPM - Package Manager</h2>
					<ul>
						<li>Télécharger une version spécifique d'une dépendance</li>
						<li class="fragment">Quelque soit son système de module utilisé</li>
						<li class="fragment">Depuis <em>Github</em>, <em>npm</em> ou le <em>registry jspm</em></li>
					</ul>
				</section>

				<section>
					<h2>System JS - Module Loader</h2>
					<ul>
						<li>Charge les modules de façon asynchrone</li>
						<li class="fragment">Quelque soit le système de module utilisé</li>
						<li class="fragment">Système de plugins</li>
						<li class="fragment">Basé sur polyfill d'ES6</li>
					</ul>
				</section>

				<section>
					<h1>Utiliser JSPM</h1>
				</section>

				<section>
					<h2>Installer JSPM</h2>
					<pre><code data-trim class="bash">
						npm install jspm --save-dev
					</code></pre>
				</section>

				<section>
					<h2>Initialiser le projet</h2>
					<pre><code data-trim class="bash" style="font-size:0.8em">
jspm init

---

Package.json file does not exist, create it? [yes]:
Would you like jspm to prefix the jspm package.json properties under jspm? [yes]:
Enter server baseURL (public folder path) [./]:
Enter jspm packages folder [src/jspm_packages]:
Enter config file path [src/config.js]:
Configuration file config.js doesnt exist, create it? [yes]:
Enter client baseURL (public folder URL) [/]:
Do you wish to use a transpiler? [yes]:
Which ES6 transpiler would you like to use, Babel, TypeScript or Traceur? [babel]:
					</code></pre>
					<aside class="notes">
						- server baseURL: dossier où le server sera lancé (/src -> contient toutes les sources de l'app assets, CSS, etc..)
			    	- client baseURL: path depuis le navigateur (baseURL: /app -> /app/index)
			    </aside>
				</section>

				<section>
					<h2>config.js</h2>
					<pre><code data-trim class="javascript">
System.config({
  baseURL: "/",
  defaultJSExtensions: true,
  transpiler: "babel",
  babelOptions: { ... },
  paths: {
    "github:*": "jspm_packages/github/*",
    "npm:*": "jspm_packages/npm/*"
  },

  map: {
    "babel": "npm:babel-core@5.8.34",
    "babel-runtime": "npm:babel-runtime@5.8.34",
    ...
  }
});
					</code></pre>
				</section>

				<section>
					<h2>Installer des dépendances</h2>
					<p>L'installation des dépendances peut être faite via:</p>
					<ul>
						<li><em>registry</em></li>
						<li><em>github</em></li>
						<li><em>npm</em></li>
					</ul>
					<pre><code data-trim class="bash">
jspm install angular
jspm install github:samouss/angular-alert-banner
jspm install npm:moment
					</code></pre>
					<aside class="notes">
						- JSPM registry: map keywork sur un provider spécifique (angular -> github:angular/bower-angular)
						- Cela permet aussi de récupérer les dependances préconfigurer pour éviter de faire de la configuration manuelle
						- Une fois installé les dépendances sont sauvegarder dans la package.json, config.js
			    </aside>
				</section>

				<section>
					<h2>Configurer des dépendances</h2>
					<p>Principales propriétés qui peuvent être surchargées&nbsp;:</p>
					<ul>
						<li><em>main</em></li>
						<li><em>map</em></li>
						<li><em>format</em></li>
					</ul>
					<!-- TODO : a mon avis ici il faudrait plusieurs slides expliquant quel option fait quoi -->
					<pre><code data-trim>
jspm install github:user/repo -o "{ main: 'path/to/main' }"
					</code></pre>
				</section>

				<section>
					<h2>Utiliser SystemJS</h2>
					<p>index.html</p>
					<pre><code data-trim>
&lt;script src="jspm_packages/system.js">&lt;/script>
&lt;script src="config.js">&lt;/script>
&lt;script>System.import('index');&lt;/script>
					</code></pre>
					<p>index.js</p>
					<pre><code data-trim>
import moment from 'moment';
import Foo from './foo';

const current = moment();
const foo = Foo();

foo.bar();
					</code></pre>
				</section>

				<section>
					<h2>Transpilation</h2>
					<ul>
						<li>Babel par défaut</li>
						<li>Support de traceur et TypeScript<sup style="vertical-align:0px;">*</sup></li>
						<li>Transpilation au runtime</li>
					</ul>
				</section>

				<section>
					<h2>Performances</h2>
					<ul>
						<li>Éviter la transpilation au runtime (<em>gulp</em>, <em>npm scripts</em>)</li>
						<li class="fragment" data-fragment-index="1">Créer un bundle avec les dépendances externes</li>
					</ul>
					<pre class="fragment" data-fragment-index="1"><code data-trim>
jspm bundle angular + moment dependencies.bundle.js --inject
					</code></pre>
				</section>

				<section>
					<h2>Performances</h2>
					<p>Avant&nbsp;:</p>
					<img src="time.png"/>
					<div class="fragment">
						<p>Après&nbsp;:</p>
						<img src="time-opti.png"/>
					</div>
				</section>

				<section>
					<h2>Production</h2>
					<p style="white-space:nowrap;">Création d'un bundle auto exécutable (via SystemJS Builder)&nbsp;:</p>
					<pre><code data-trim>
jspm bundle-sfx src/index.js dist/app.bundle.js
					</code></pre>
					<p>Options supportées&nbsp;:</p>
					<ul>
						<li class="fragment"><em>minification</em></li>
						<li class="fragment"><em>source maps</em></li>
						<li class="fragment"><em>format</em></li>
						<li class="fragment"><em>runtime</em></li>
					</ul>
				</section>

				<section>
					<h2>Plugins</h2>
					<p>De nombreux plugins disponibles CSS, JSON, TypeScript...</p>
					<pre><code data-trim class="bash">
jspm install css
					</code></pre>
					<div class="fragment">
						<p>Usage&nbsp;:</p>
						<pre><code data-trim>
import './style.css!'
						</code></pre>
					</div>
					<div class="fragment">
						<p>Ce qui ce passe en réalité&nbsp;:</p>
						<pre><code data-trim>
&lt;head>
  &lt;title>Document&lt;/title>
  &lt;link type="text/css" rel="stylesheet" href="style.css">
&lt;/head>
						</code></pre>
					</div>
				</section>

				<section>
					<h2>La concurrence - Webpack</h2>
					<ul>
						<li>Bundle uniquement</li>
						<li>Support d'autres format que JavaScript</li>
						<li>Pas de package manager</li>
					</ul>
				</section>

				<section>
					<h2>La concurrence - Browserify</h2>
					<ul>
						<li>Support uniquement de Common JS</li>
						<li>Bundle uniquement</li>
						<li>Orienté <em>Isomorphic JS</em></li>
					</ul>
				</section>

				<section>
					<h2>Conclusion</h2>
				</section>

				<section>
					<h2>Questions&nbsp;?</h2>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
