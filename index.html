<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js – The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">
    <link rel="stylesheet" href="devoxx_style/devoxxfr.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<div class="slides">
				<section data-state="intro">
					<h1>JSPM</h1>
					<img src="jspm.svg" />
					<h2><a href="jspm.io">jspm.io</a></h2>
				</section>

        <section>
          <div style="display:inline-block;width:49%;vertical-align:top">
           <li>Benoît Lemoine</li>
           <li>Développeur FullStack <br />(Scala / TypeScript) chez Captain&nbsp;Dash</li>
           <li>@benoit_lemoine</li>
          </div>
          <div style="display:inline-block;width:49%;vertical-align:top">
           <li>Samuel Vaillant</li>
           <li>*A remplir* chez Captain&nbsp;Dash</li>
           <li>@Samouss_28</li>
          </div>
        </section>

				<section>
					<h2>Les balises script...</h2>


						<pre><code data-trim>
&lt;script src="vendor/moment.js">&lt;/script>
&lt;script src="vendor/lodash.js">&lt;/script>
&lt;script src="vendor/jquery.js">&lt;/script>
&lt;script src="vendor/jquery-ui.js">&lt;/script>
&lt;script src="vendor/angular.js">&lt;/script>
&lt;script src="src/app.js">&lt;/script>
						</code></pre>

					<h3  class="fragment">...c'est so 2010</h3>
				</section>

				<section>
					<h2>Les problèmes de l'approche traditionnelle</h2>
					<ul>
						<li>Les variables globales (<code>_</code>, <code>$</code>, <code>moment</code>, etc.)</li>
						<li class="fragment">Les conflits de versions</li>
						<li  class="fragment">L'ordre d'exécution</li>
						<li  class="fragment">Les dépendances transitives</li>
					</ul>
				</section>
				<section>
					<h2>Exemple&nbsp;: </h2>
					<img src="dependenciesHell.jpeg"/>
				</section>

				<section>
					<h2>Les modules en JS</h2>
					<h4>AMD</h4>
					<pre><code data-trim class="javascript">
define(function (require, exports) {
    var _ = require('lodash');
    exports.add = function add(a, b) {
      return _.add(a, b);
    };
});
					</code></pre>
					<h4>Common JS</h4>
<pre><code data-trim class="javascript">
var _ = require('lodash');

module.exports = {
  add: function add(a, b) {
    return _.add(a, b);
  };
}
					</code></pre>
				</section>

				<section>
					<h2>Les modules ES6</h2>
<pre><code class="javascript" data-trim>
//MyMath.js
import _ from 'lodash';

export default function add(a, b) {
  return _.add(a, b);
}
export function multiply(a, b) {
  return a * b;
}
</code></pre>
<pre><code class="javascript" data-trim>
import myAdd from './MyMath';
import {multiply} from './MyMath';

myAdd(1, 2) //3
multiply(2, 3) //6
</code></pre>
				</section>

        <section>
          <h2>System JS</h2>
          <ul>
            <li>Module Loader</li>
          </ul>
        </section>

				<section>
					<h2>JSPM</h2>
          <ul>
            <li>Package Manager</li>
          </ul>
				</section>

				<section>
					<h1>Utiliser JSPM</h1>
				</section>

				<section>
					<h2>Installer JSPM</h2>
					<pre><code data-trim class="bash">
						npm install jspm@beta --save-dev
					</code></pre>
				</section>

				<section>
					<h2>Initialiser le projet</h2>
					<pre><code data-trim class="bash" style="font-size:0.8em">
jspm init

---

- Init Mode (Quick, Standard, Custom) [Quick]: Quick
- Local package name (recommended, optional): clock-component
- package.json directories.lib [src]: src
- System.config browser baseURL (optional):
- System.config local package main [clock-component.js]: index.ts
- System.config transpiler (Babel, Traceur, TypeScript, None) [babel]: typescript</code></pre>
				</section>

				<section>
					<h2>jspm.browser.js</h2>
					<pre><code data-trim class="javascript">
SystemJS.config({
  baseURL: "/",
  paths: {
    "github:*": "jspm_packages/github/*",
    "npm:*": "jspm_packages/npm/*",
    "clock-component/": "src/"
  }
});</code></pre>
				</section>

				<section>
					<h2>jspm.config.js</h2>
					<pre><code data-trim class="javascript">
SystemJS.config({
  transpiler: "plugin-typescript",
  packages: {
    "clock-component": {
      "format": "esm",
      "main": "index.ts",
      "meta": {
        "*.ts": {
          "loader": "plugin-typescript"
        }
      }
    }
  }
});</code></pre>
				</section>

				<section>
					<h2>Installer des dépendances</h2>
					<p>L'installation des dépendances peut être faite via :</p>
					<ul>
						<li><em>registry</em></li>
						<li><em>github</em></li>
						<li><em>npm</em></li>
					</ul>
					<pre><code data-trim class="bash">
jspm install angular
jspm install github:username/repo
jspm install npm:moment
					</code></pre>
					<aside class="notes">
						- JSPM registry: map mot clé sur un provider spécifique (angular -> github:angular/bower-angular)
						- Permet de récupérer les dependances préconfigurer pour éviter de faire de la configuration manuelle (main, dependencies, format)
						- Une fois installé les dépendances sont sauvegarder dans la package.json, config.js
			    </aside>
				</section>

				<section>
					<h2>Configurer des dépendances</h2>
					<p>Principales propriétés qui peuvent être surchargées&nbsp;:</p>
					<ul>
						<li><em>main</em></li>
						<li><em>format</em></li>
					</ul>
					<pre><code data-trim>
jspm install github:user/repo -o "{ main: 'path/to/main' }"
					</code></pre>
				</section>

				<section>
					<h2>Utiliser SystemJS</h2>
					<p>index.html</p>
					<pre><code data-trim>
&lt;script src="./jspm_packages/system.js">&lt;/script>
&lt;script src="./jspm.browser.js">&lt;/script>
&lt;script src="./jspm.config.js">&lt;/script>
&lt;script>System.import('bootstrap.ts');&lt;/script>
					</code></pre>
					<p>bootstrap.ts</p>
					<pre><code data-trim>
// import dependency
import moment from 'moment';

// import component
import ClockComponent from 'clock-component';
// or
import ClockComponent from './src/index.ts';

const current = moment();
const component = ClockComponent();

component.render();
					</code></pre>
				</section>

				<section>
					<h2>Transpilation</h2>
					<ul>
						<li>Babel par défaut</li>
						<li>Support de traceur et TypeScript<sup style="vertical-align:0px;">*</sup></li>
						<li>Transpilation au runtime</li>
					</ul>
				</section>

				<section>
					<h2>Performances</h2>
					<ul>
						<li>Éviter la transpilation au runtime (<em>gulp</em>, <em>npm scripts</em>)</li>
						<li class="fragment" data-fragment-index="1">Créer un bundle avec les dépendances externes</li>
					</ul>
					<pre class="fragment" data-fragment-index="1"><code data-trim>
jspm bundle angular + moment dependencies.bundle.js --inject
					</code></pre>
				</section>

				<section>
					<h2>Performances</h2>
					<p>Avant&nbsp;:</p>
					<img src="time.png"/>
					<div class="fragment">
						<p>Après&nbsp;:</p>
						<img src="time-opti.png"/>
					</div>
				</section>

				<section>
					<h2>Production</h2>
					<p style="white-space:nowrap;">Création d'un bundle auto exécutable (via SystemJS Builder)&nbsp;:</p>
					<pre><code data-trim>
jspm bundle-sfx src/index.js dist/app.bundle.js
					</code></pre>
					<p>Options supportées&nbsp;:</p>
					<ul>
						<li class="fragment"><em>minification</em></li>
						<li class="fragment"><em>source maps</em></li>
						<li class="fragment"><em>format</em></li>
						<li class="fragment"><em>runtime</em></li>
					</ul>
				</section>

				<section>
					<h2>Plugins</h2>
					<p>De nombreux plugins disponibles CSS, JSON...</p>
					<pre><code data-trim class="bash">
jspm install css
					</code></pre>
					<div class="fragment">
						<p>Usage&nbsp;:</p>
						<pre><code data-trim>
import './style.css!'
						</code></pre>
					</div>
					<div class="fragment">
						<p>Ce qui se passe en réalité&nbsp;:</p>
						<pre><code data-trim>
&lt;head>
  &lt;title>Document&lt;/title>
  &lt;link type="text/css" rel="stylesheet" href="style.css">
&lt;/head>
						</code></pre>
					</div>
				</section>

				<section>
					<h2>La concurrence - Webpack</h2>
					<ul>
						<li>Bundle uniquement</li>
						<li>Support d'autres format que JavaScript</li>
						<li>Pas de package manager</li>
					</ul>
				</section>

				<section>
					<h2>Conclusion</h2>
				</section>

				<section>
					<h2>Questions&nbsp;?</h2>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
        controls: false,
				progress: false,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom
        width:1200,
        height:1200*9/16,

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
